import{d as w,b as T,c as j,e as s,h as L,w as n,g as d,i as e,m as P,f as a,j as k,t as l,u as c,A as p,_ as H,r as m,s as _,a4 as D,z as E,K as F,l as I,n as R,k as z,L as M}from"./index-1253acc1.js";import{s as y,a as q}from"./column.esm-0f4f2e6f.js";import"./index.esm-a9903af9.js";const W=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Key ",-1),Y={class:"overflow-ellipsis overflow-hidden ... text-blue-primary"},G=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Block ",-1),O=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Active ",-1),Q=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Effective Balance ",-1),U={class:"flex gap-1"},J={class:"font-semibold"},X={class:"flex gap-1"},Z={class:"font-semibold"},ee=w({__name:"HarvesterDataTable",props:{harvesters:{type:Array,required:!0}},setup(B){return(x,b)=>{const u=T("router-link"),r=j("tooltip");return s(),L(c(q),{value:x.harvesters},{default:n(()=>[d(c(y),{class:"lg:hidden grid grid-cols-2 gap-6"},{body:n(({data:t})=>[e("div",null,[e("div",null,[W,e("div",Y,[d(u,{to:{name:"ViewAccount",params:{accountParam:t.harvesterKey.publicKey}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:n(()=>[P((s(),a("span",null,[k(l(t.harvesterKey.publicKey),1)])),[[r,t.harvesterKey.publicKey,void 0,{right:!0}]])]),_:2},1032,["to"])])])]),e("div",null,[G,e("div",null,[d(u,{to:{name:"ViewBlock",params:{blockHeight:t.lastSigningBlockHeight.lower}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:n(()=>[e("span",null,l(t.lastSigningBlockHeight.lower),1)]),_:2},1032,["to"])])]),e("div",null,[O,e("div",null,l(t.canHarvest?"Yes":"No"),1)]),e("div",null,[e("div",null,[Q,e("div",U,[e("div",null,l(t.effectiveBalance.compact()/Math.pow(10,c(p).nativeToken.divisibility)),1),e("div",J,l(c(p).nativeToken.label),1)])])])]),_:1}),d(c(y),{header:"Key",class:"hidden lg:table-cell",headerStyle:"width:110px; text-transform:uppercase"},{body:n(({data:t})=>[e("div",null,[d(u,{to:{name:"ViewAccount",params:{accountParam:t.harvesterKey.publicKey}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:n(()=>[e("span",null,l(t.harvesterKey.publicKey),1)]),_:2},1032,["to"])])]),_:1}),d(c(y),{header:"Block",class:"hidden lg:table-cell",headerStyle:"width:110px; text-transform:uppercase"},{body:n(({data:t})=>[e("div",null,[d(u,{to:{name:"ViewBlock",params:{blockHeight:t.lastSigningBlockHeight.lower}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:n(()=>[e("span",null,l(t.lastSigningBlockHeight.lower),1)]),_:2},1032,["to"])])]),_:1}),d(c(y),{class:"hidden lg:table-cell",header:"Active",headerStyle:"width:110px; text-transform:uppercase"},{body:n(({data:t})=>[e("div",null,l(t.canHarvest?"Yes":"No"),1)]),_:1}),d(c(y),{class:"hidden lg:table-cell",header:"Effective Balance",headerStyle:"width:150px; text-transform:uppercase"},{body:n(({data:t})=>[e("div",X,[e("div",null,l(t.effectiveBalance.compact()/Math.pow(10,c(p).nativeToken.divisibility)),1),e("div",Z,l(c(p).nativeToken.label),1)])]),_:1})]),_:1},8,["value"])}}}),te=H(ee,[["__file","/home/runner/work/web-explorer-vuejs/web-explorer-vuejs/src/modules/harvester/components/HarvesterDataTable.vue"]]),se=e("p",{class:"text-gray-500 mb-5 text-sm font-bold"},"Harvesters",-1),re={key:0},ae=e("div",{class:"flex justify-center items-center border-gray-400 mt-15"},[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-navy-primary mr-2"}),e("span",{class:"text-tsm"},"Fetching transactions")],-1),oe=[ae],le={key:0,class:"sm:flex sm:justify-between my-5 mb-15"},ie={class:"text-xs text-gray-700 mb-3 sm:mb-0 text-center sm:text-left"},ne=M('<option value="10">10</option><option value="20">20</option><option value="30">30</option><option value="40">40</option><option value="50">50</option>',5),ce=[ne],de={class:"sm:flex sm:items-center text-center sm:text-right"},ue={key:1,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},ve={key:3,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},pe={class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs"},be={key:5,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},xe={key:7,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},me=w({__name:"ViewHarvesterList",setup(B){const x=m([]),b=m(!0),u=m(20),r=m(1),t=m(0),f=R(),K=f==null?void 0:f.appContext.config.globalProperties.emitter,h=async()=>{b.value=!0;const i=new z.PaginationQueryParams;i.pageSize=u.value,i.pageNumber=r.value,await p.chainAPI.harvesterAPI.searchHarvesters(i).then(({harvestersMetaInfo:o,pagination:v})=>{x.value=o,t.value=v.totalPages,b.value=!1}).catch(()=>{x.value=[],t.value=0,b.value=!1})},S=()=>{r.value=1,h()},C=_(()=>r.value>1),N=_(()=>r.value>1),V=_(()=>t.value-r.value>0),$=_(()=>r.value<t.value),g=i=>{r.value=i,h()},A=D([()=>p.isReady,()=>p.chainAPI],async i=>{i[0]&&i[1]&&(await h(),A())},{immediate:!0});return K.on("CHANGE_NETWORK",i=>{b.value=!0,i&&(r.value=1,h())}),(i,o)=>(s(),a("div",null,[se,b.value?(s(),a("div",re,[...oe])):(s(),a("div",{key:1,class:E({"mb-15":t.value==1})},[d(te,{harvesters:x.value},null,8,["harvesters"]),t.value>1?(s(),a("div",le,[e("div",ie,[k(" Show "),P(e("select",{"onUpdate:modelValue":o[0]||(o[0]=v=>u.value=v),class:"border border-gray-300 rounded-md p-1",onChange:S},[...ce],544),[[F,u.value]]),k(" Records ")]),e("div",de,[C.value?(s(),a("div",{key:0,onClick:o[1]||(o[1]=v=>g(1)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," First ")):(s(),a("div",ue," First ")),N.value?(s(),a("div",{key:2,onClick:o[2]||(o[2]=v=>g(--r.value)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Previous ")):(s(),a("div",ve," Previous ")),e("div",pe," Page "+l(r.value)+" of "+l(t.value),1),V.value?(s(),a("div",{key:4,onClick:o[3]||(o[3]=v=>g(++r.value)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Next ")):(s(),a("div",be," Next ")),$.value?(s(),a("div",{key:6,onClick:o[4]||(o[4]=v=>g(t.value)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs ml-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Last ")):(s(),a("div",xe," Last "))])])):I("v-if",!0)],2))]))}}),_e=H(me,[["__file","/home/runner/work/web-explorer-vuejs/web-explorer-vuejs/src/modules/harvester/views/ViewHarvesterList.vue"]]);export{_e as default};
