import{d as H,b as j,c as L,e as s,h as D,w as c,g as u,i as e,m as P,f as a,j as k,t as n,u as l,H as w,A as p,_ as B,r as m,s as _,a4 as E,z as F,K as I,l as R,n as z,k as q,L as W}from"./index-a3584fe9.js";import{s as y,a as Y}from"./column.esm-2add0e3e.js";import"./index.esm-07859ce8.js";const G=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Key ",-1),M={class:"overflow-ellipsis overflow-hidden ... text-blue-primary"},O=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Block ",-1),Q=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Active ",-1),U=e("div",{class:"uppercase text-xs text-gray-300 font-bold mb-1"}," Effective Balance ",-1),J={class:"flex gap-1"},X={class:"font-semibold"},Z={class:"flex gap-1"},ee={class:"font-semibold"},te=H({__name:"HarvesterDataTable",props:{harvesters:{type:Array,required:!0}},setup(C){return(x,b)=>{const d=j("router-link"),r=L("tooltip");return s(),D(l(Y),{value:x.harvesters},{default:c(()=>[u(l(y),{class:"lg:hidden grid grid-cols-2 gap-6"},{body:c(({data:t})=>[e("div",null,[e("div",null,[G,e("div",M,[u(d,{to:{name:"ViewAccount",params:{accountParam:t.harvesterKey.publicKey}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:c(()=>[P((s(),a("span",null,[k(n(t.harvesterKey.publicKey),1)])),[[r,t.harvesterKey.publicKey,void 0,{right:!0}]])]),_:2},1032,["to"])])])]),e("div",null,[O,e("div",null,[u(d,{to:{name:"ViewBlock",params:{blockHeight:t.lastSigningBlockHeight.compact()}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:c(()=>[e("span",null,n(t.lastSigningBlockHeight.lower),1)]),_:2},1032,["to"])])]),e("div",null,[Q,e("div",null,n(t.canHarvest?"Yes":"No"),1)]),e("div",null,[e("div",null,[U,e("div",J,[e("div",null,n(l(w).convertToCurrency(t.effectiveBalance.compact(),l(p).nativeToken.divisibility)),1),e("div",X,n(l(p).nativeToken.label),1)])])])]),_:1}),u(l(y),{header:"Key",class:"hidden lg:table-cell",headerStyle:"width:110px; text-transform:uppercase"},{body:c(({data:t})=>[e("div",null,[u(d,{to:{name:"ViewAccount",params:{accountParam:t.harvesterKey.publicKey}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:c(()=>[e("span",null,n(t.harvesterKey.publicKey),1)]),_:2},1032,["to"])])]),_:1}),u(l(y),{header:"Block",class:"hidden lg:table-cell",headerStyle:"width:110px; text-transform:uppercase"},{body:c(({data:t})=>[e("div",null,[u(d,{to:{name:"ViewBlock",params:{blockHeight:t.lastSigningBlockHeight.compact()}},class:"text-xs text-blue-primary hover:underline hover:text-blue-primary"},{default:c(()=>[e("span",null,n(t.lastSigningBlockHeight.lower),1)]),_:2},1032,["to"])])]),_:1}),u(l(y),{class:"hidden lg:table-cell",header:"Active",headerStyle:"width:110px; text-transform:uppercase"},{body:c(({data:t})=>[e("div",null,n(t.canHarvest?"Yes":"No"),1)]),_:1}),u(l(y),{class:"hidden lg:table-cell",header:"Effective Balance",headerStyle:"width:150px; text-transform:uppercase"},{body:c(({data:t})=>[e("div",Z,[e("div",null,n(l(w).convertToCurrency(t.effectiveBalance.compact(),l(p).nativeToken.divisibility)),1),e("div",ee,n(l(p).nativeToken.label),1)])]),_:1})]),_:1},8,["value"])}}}),se=B(te,[["__file","/home/runner/work/web-explorer-vuejs/web-explorer-vuejs/src/modules/harvester/components/HarvesterDataTable.vue"]]),re=e("p",{class:"text-gray-500 mb-5 text-sm font-bold"},"Harvesters",-1),ae={key:0},oe=e("div",{class:"flex justify-center items-center border-gray-400 mt-15"},[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-navy-primary mr-2"}),e("span",{class:"text-tsm"},"Fetching transactions")],-1),le=[oe],ne={key:0,class:"sm:flex sm:justify-between my-5 mb-15"},ie={class:"text-xs text-gray-700 mb-3 sm:mb-0 text-center sm:text-left"},ce=W('<option value="10">10</option><option value="20">20</option><option value="30">30</option><option value="40">40</option><option value="50">50</option>',5),ue=[ce],de={class:"sm:flex sm:items-center text-center sm:text-right"},ve={key:1,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},pe={key:3,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},be={class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs"},xe={key:5,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},me={key:7,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},ye=H({__name:"ViewHarvesterList",setup(C){const x=m([]),b=m(!0),d=m(20),r=m(1),t=m(0),f=z(),K=f==null?void 0:f.appContext.config.globalProperties.emitter,g=async()=>{b.value=!0;const i=new q.PaginationQueryParams;i.pageSize=d.value,i.pageNumber=r.value,await p.chainAPI.harvesterAPI.searchHarvesters(i).then(({harvestersMetaInfo:o,pagination:v})=>{x.value=o,t.value=v.totalPages,b.value=!1}).catch(()=>{x.value=[],t.value=0,b.value=!1})},S=()=>{r.value=1,g()},N=_(()=>r.value>1),V=_(()=>r.value>1),$=_(()=>t.value-r.value>0),A=_(()=>r.value<t.value),h=i=>{r.value=i,g()},T=E([()=>p.isReady,()=>p.chainAPI],async i=>{i[0]&&i[1]&&(await g(),T())},{immediate:!0});return K.on("CHANGE_NETWORK",i=>{b.value=!0,i&&(r.value=1,g())}),(i,o)=>(s(),a("div",null,[re,b.value?(s(),a("div",ae,[...le])):(s(),a("div",{key:1,class:F({"mb-15":t.value==1})},[u(se,{harvesters:x.value},null,8,["harvesters"]),t.value>1?(s(),a("div",ne,[e("div",ie,[k(" Show "),P(e("select",{"onUpdate:modelValue":o[0]||(o[0]=v=>d.value=v),class:"border border-gray-300 rounded-md p-1",onChange:S},[...ue],544),[[I,d.value]]),k(" Records ")]),e("div",de,[N.value?(s(),a("div",{key:0,onClick:o[1]||(o[1]=v=>h(1)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," First ")):(s(),a("div",ve," First ")),V.value?(s(),a("div",{key:2,onClick:o[2]||(o[2]=v=>h(--r.value)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Previous ")):(s(),a("div",pe," Previous ")),e("div",be," Page "+n(r.value)+" of "+n(t.value),1),$.value?(s(),a("div",{key:4,onClick:o[3]||(o[3]=v=>h(++r.value)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Next ")):(s(),a("div",xe," Next ")),A.value?(s(),a("div",{key:6,onClick:o[4]||(o[4]=v=>h(t.value)),class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs ml-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Last ")):(s(),a("div",me," Last "))])])):R("v-if",!0)],2))]))}}),fe=B(ye,[["__file","/home/runner/work/web-explorer-vuejs/web-explorer-vuejs/src/modules/harvester/views/ViewHarvesterList.vue"]]);export{fe as default};
