import{d as U,q as O,r as b,A as P,s as p,C as Q,b as q,e as s,f as a,i as e,t as n,u as d,g as C,w as z,j as h,T as w,m as W,G as $,l as T,n as J,a1 as X,k as B,x as Y,y as Z,_ as ee}from"./index-b231ac30.js";import{_ as te,c as oe}from"./functions-a1a22147.js";import{_ as se}from"./icon-xpx-70b6052c.js";import{M as ae}from"./MixedTxnDataTable-5de27a84.js";import"./column.esm-3ad53f53.js";const t=_=>(Y("data-v-79662836"),_=_(),Z(),_),le={key:0},ie=t(()=>e("p",{class:"text-gray-500 mb-5 text-sm font-bold"},"Block Details",-1)),ne={key:0},re={class:"p-3 bg-yellow-100 text-yellow-700"},ce={key:1},de=t(()=>e("div",{class:"flex justify-center items-center border-gray-400 mt-10 mb-20"},[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-navy-primary mr-2"}),e("span",{class:"text-tsm"},"Fetching Block Details")],-1)),ue=[de],ve={key:2},be={class:"filter shadow-xl border border-gray-50 p-5 mb-15"},_e={class:"txn-div"},pe=t(()=>e("div",null,"Block Height",-1)),me=t(()=>e("div",null,"Timestamp",-1)),xe=t(()=>e("div",null,"Validator",-1)),ye={class:"break-all flex items-center"},ge=t(()=>e("div",null,"Hash",-1)),he={class:"break-all flex items-center"},ke=t(()=>e("div",null,"Difficulty",-1)),fe=t(()=>e("div",null,"No. of Transaction",-1)),we=t(()=>e("div",null,"Total Fees",-1)),Te={class:"font-bold"},Ne=t(()=>e("img",{src:se,class:"inline-block ml-2",style:{top:"-3 width:14px"}},null,-1)),Pe={class:"ml-2"},Ce=t(()=>e("div",null,"Fee Multiplier",-1)),Be={key:0},Ve=t(()=>e("p",{class:"text-gray-500 mb-5 text-sm font-bold"},"Transactions",-1)),Se={class:"filter shadow-xl border border-gray-50 p-5 mb-15"},Fe={key:0,class:"sm:flex sm:justify-between my-5 mb-15"},He={class:"text-xs text-gray-700 mb-3 sm:mb-0 text-center sm:text-left"},je=t(()=>e("option",{value:"20"},"20",-1)),Ie=t(()=>e("option",{value:"30"},"30",-1)),Ae=t(()=>e("option",{value:"40"},"40",-1)),De=t(()=>e("option",{value:"50"},"50",-1)),Me=[je,Ie,Ae,De],Ee={class:"sm:flex sm:items-center text-center sm:text-right"},Re={key:1,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},Ke={key:3,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},Le={class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs"},Ge={key:5,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},Ue={key:7,class:"bg-gray-50 inline-block border border-gray-50 rounded-sm px-2 py-1 text-gray-700 text-xs mx-1"},Oe=U({__name:"ViewBlock",props:{blockHeight:Number},setup(_){const m=_,V=O(),k=J(),S=k==null?void 0:k.appContext.config.globalProperties.emitter,o=b(null),N=b([]),x=b(!1),F=P.nativeToken.label,H=l=>{let i=document.getElementById(l);if(i){let v=i.getAttribute("copyValue"),g=i.getAttribute("copySubject");v&&(oe(v),V.add({severity:"info",detail:g+" copied",group:"br",life:3e3}))}},f=async()=>{if(!m.blockHeight)return;const l=await X.getBlockByHeight(m.blockHeight);if(!P.isReady){setTimeout(f,1e3);return}l?(o.value=l,x.value=!1):x.value=!0,c()};f();const y=b(20),r=b(1),u=b(0),j=p(()=>r.value>1),I=p(()=>r.value>1),A=p(()=>u.value-r.value>0),D=p(()=>r.value<u.value),M=()=>{r.value=1,c()},E=()=>{--r.value,c()},R=()=>{++r.value,c()},K=()=>{r.value=u.value,c()},L=()=>{r.value=1,c()},G=p(()=>Q.chainNetworkName);S.on("CHANGE_NETWORK",l=>{l&&f()});const c=async()=>{if(m.blockHeight!=null){let l=new B.TransactionQueryParams;l.height=m.blockHeight,l.pageSize=y.value,l.pageNumber=r.value;let i=await w.searchTxns(B.TransactionGroupType.CONFIRMED,l);if(i.transactions.length>0){let v=await w.formatConfirmedMixedTxns(i.transactions);N.value=v,u.value=i.pagination.totalPages}}};return c(),(l,i)=>{const v=q("router-link");return o.value?(s(),a("div",le,[ie,x.value?(s(),a("div",ne,[e("div",re," Block is not available in "+n(d(G)),1)])):!x.value&&!o.value?(s(),a("div",ce,ue)):(s(),a("div",ve,[e("div",be,[e("div",_e,[e("div",null,[pe,e("div",null,n(o.value.height),1)]),e("div",null,[me,e("div",null,n(o.value.timestamp),1)]),e("div",null,[xe,e("div",ye,[C(v,{to:{name:"ViewAccount",params:{accountParam:o.value.validator}},class:"text-blue-600 hover:text-blue-primary hover:underline mr-2",id:"validatorPublicKey",copyValue:o.value.validator,copySubject:"Validator Public Key"},{default:z(()=>[h(n(o.value.validator),1)]),_:1},8,["to","copyValue"]),e("img",{src:te,onClick:i[0]||(i[0]=g=>H("validatorPublicKey")),class:"cursor-pointer"})])]),e("div",null,[ge,e("div",he,n(o.value.hash),1)]),e("div",null,[ke,e("div",null,n(o.value.difficulty),1)]),e("div",null,[fe,e("div",null,n(o.value.numTransactions),1)]),e("div",null,[we,e("div",Te,[h(n(d(w).convertToExactNativeAmount(o.value.totalFee)),1),Ne,e("span",Pe,n(d(F)),1)])]),e("div",null,[Ce,e("div",null,n(o.value.feeMultiplier),1)])])]),o.value.numTransactions>0?(s(),a("div",Be,[Ve,e("div",Se,[C(ae,{transactions:N.value,pages:y.value},null,8,["transactions","pages"]),u.value>1?(s(),a("div",Fe,[e("div",He,[h(" Show "),W(e("select",{"onUpdate:modelValue":i[1]||(i[1]=g=>y.value=g),class:"border border-gray-300 rounded-md p-1",onChange:L},Me,544),[[$,y.value]]),h(" Records ")]),e("div",Ee,[d(j)?(s(),a("div",{key:0,onClick:M,class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," First ")):(s(),a("div",Re," First ")),d(I)?(s(),a("div",{key:2,onClick:E,class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Previous ")):(s(),a("div",Ke," Previous ")),e("div",Le," Page "+n(r.value)+" of "+n(u.value),1),d(A)?(s(),a("div",{key:4,onClick:R,class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs mx-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Next ")):(s(),a("div",Ge," Next ")),d(D)?(s(),a("div",{key:6,onClick:K,class:"bg-blue-100 inline-block border border-blue-100 rounded-sm px-2 py-1 text-blue-700 text-xs ml-1 cursor-pointer hover:bg-blue-200 duration-300 transition-all"}," Last ")):(s(),a("div",Ue," Last "))])])):T("v-if",!0)])])):T("v-if",!0)]))])):T("v-if",!0)}}});const Je=ee(Oe,[["__scopeId","data-v-79662836"],["__file","/home/runner/work/web-explorer-vuejs/web-explorer-vuejs/src/modules/block/views/ViewBlock.vue"]]);export{Je as default};
